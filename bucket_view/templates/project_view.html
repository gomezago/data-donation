{% extends "base.html" %}
{% load static %}
{% block page_content %}
<section style="padding-top: 50px; padding-bottom: 50px">
    <div class="container">
        <div style="padding-top: 20px">
        <h1>{{ project.title }}</h1>
              <hr>
            <p><b>Main Researcher:</b> {{ project.researcher_name }}<br>
                <b>Contact Email: </b><a href="mailto:{{ project.user.email }}">{{ project.user.email }}</a><br>
                <b>Affiliation:</b> {{ project.researcher_affiliation }}<br>
                <b>Duration:</b> {{project.start}} to {{ project.end }}</p>
        </div>
        <div class="row">
            <div class="col-md-5">
                <img class="card-img-top" src="{{ project.image.url }}" width="100%">
                    {% if project.active %}
                        <h6><span class="small text-uppercase" style="color:#019875">STATUS: Open</span></h6>
                    {% else %}
                       <h6><span class="small text-uppercase" style="color:#B8293D">STATUS: Closed</span></h6>
                {% endif %}
            </div>
            <div class="col-md-7">
                <h5>Project Description</h5>
                <p>{{ project.description }}</p>
            </div>
            <div class="container">
                <h5>Which data is required?</h5>
                <p>
                    {% for key, value in project.data.items %}
                        {{ value.0 }},
                    {% endfor %}.</p>
                <h5>How will the data be used?</h5>
                <p>{{ project.data_info }}</p>
                <h5>How to donate?</h5>
            <p>{{ project.instructions }}</p>
        </div>
        {% if project.id != 'ddd_demo' %}
            <section style="padding-top: 2.5%">
            <div class="container">
            <h3>Donate Your Data</h3>
            {% if project.active %}
                {% if not user.is_authenticated %}
                <p>You first must <a href="/bucket/login/">log in</a> or <a href="/bucket/login/">create a user</a> to donate your data.</p>
                {% else %}
                     <form action="/project/{{ project.pk }}/", method="post", enctype="multipart/form-data">
                        {% csrf_token %}
                         {% include 'messages.html' %}
                          <div class="form-group row required">
                            <label class="col-sm-3 col-form-label col-form-label-sm control-label">Upload your Data</label>
                             <div class="col-sm-7">
                                {{ form.data }}
                                 <small class="form-tex text-muted">Note that <b>{{ project.title }}</b> only accepts <b>.cluedata</b> files.</small>
                            </div>
                         </div>
                         <div class="form-group row required">
                            <label class="col-sm-3 col-form-label col-form-label-sm control-label">Select the Data</label>
                            <div class="col-sm-7">
                                {{ form.data_selection }}
                                <small class="form-tex text-muted">Select the type(s) of data you wish to donate to <b>{{ project.title }}</b>. Hold <b>CTRL</b>, <b>âŒ˜</b> or <b>drag with the mouse</b> to select more than one.</small>
                            </div>
                         </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label col-form-label-sm">Indicate your Preferences</label>
                            <div class="col-sm-7">
                                <label>{{ form.updates }} I wish to receive updates from <b>{{ project.title }}</b></label>
                                <label>{{ form.participate }} I wish to further participate in <b>{{ project.title }}</b></label>
                            </div>
                         </div>
                          <div class="form-group row required">
                            <label class="col-sm-3 col-form-label col-form-label-sm control-label">Confirm your Agreement</label>
                            <div class="col-sm-7">
                                <label class="control-label">{{ form.consent }} I have read and understood this page</label>
                                <label class="control-label">{{ form.consent }} I consent voluntarily to donate my data to <b>{{ project.title }}</b></label>
                                <label class="control-label">{{ form.consent }} I understand that I can <b>withdraw my donation</b> any time</label>
                                <label class="control-label">{{ form.consent }} I confirm that I am <b>18 years old or older</b></label>
                            </div>
                         </div>
                        <div class="form-row">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-7">
                                <button type="submit", class="btn btn-primary btn-xs" style="float: left">Donate</button>
                            </div>
                        </div>
                     </form>
                {% endif %}
            {% else %}
                <p>This project is closed. At this time you cannot donate your data. We invite you to <a href="{% url 'project_list' %}">explore other projects</a>.</p>
            {% endif %}
            </div>
          </section>
        {% endif %}
</section>
{% endblock %}
